import form from"./form.js";export default function animations(){let e,t,o,r=[];const n=document.querySelector(".wrapper");function i(){setTimeout(()=>{r.length&&r.map(e=>{e.destroy()});let e=!0;document.querySelector(".index__chat [data-delay]")&&document.querySelectorAll(".index__chat_field").forEach(t=>{const o=new IntersectionObserver((function(o){o.forEach(o=>{if(o.isIntersecting){if(t.closest(".index__chat").classList.add("in-view"),e){e=!1,t.querySelector("textarea").focus({preventScroll:!0});let o=0;document.querySelectorAll(".index__chat_item").forEach(e=>{o+=Number(e.dataset.delay),r.push(new Typed(e.querySelector("span"),{strings:[e.dataset.text],typeSpeed:50,startDelay:1e3*o,onComplete:t=>{e.classList.remove("is-active")},preStringTyped:t=>{e.classList.add("is-active"),e.classList.add("is-visible"),e.closest(".index__chat.in-view")&&window.scrollTo({left:0,top:n.offsetHeight})}}))})}}else t.closest(".index__chat").classList.remove("in-view")})}));o.disconnect(t),o.observe(t)})},200),document.querySelector(".fade-in-on-start")&&gsap.to(".fade-in-on-start",{opacity:1,duration:2,delay:.4,ease:"power3.out"}),document.querySelector(".index__block")?(o&&o.kill(),o=gsap.timeline(),gsap.set(".index__hero",{transform:"translate3d(0,100%,0)"}),gsap.set(".index__about_inner",{transform:"translate3d(0,100%,0)"}),o.to(".index__hero",{transform:"translate3d(0,0,0)",duration:2,delay:.4,ease:"power3.out"}),o.to(".index__about_inner",{transform:"translate3d(0,0,0)",duration:2,ease:"power3.out",onComplete:()=>{o.kill()}},"-=1.9")):o&&o.kill()}function a(){if(ScrollTrigger.killAll(),document.querySelector(".index__about p")){const e=new SplitType(".index__about p",{types:"words"});gsap.set(e.words,{opacity:.15});const t=gsap.to(e.words,{opacity:1,stagger:1,duration:1.5,immediateRender:!1,paused:!0});ScrollTrigger.create({trigger:document.querySelector(".index__about"),scrub:1,start:"top bottom",end:"bottom center",scroller:document.body,animation:t})}const o=document.querySelectorAll(".index__block");if(o[0]){e&&e.kill(),e=gsap.timeline({scrollTrigger:{trigger:o[0],start:"top top",end:"center top",scroller:document.body,scrub:!0,pin:!0}}),e.pause(),e.fromTo(".index__hero_inner",{transform:"translate3d(0,0%,0.1px)"},{transform:"translate3d(0,-60%,0.1px)"}),t&&t.kill(),t=gsap.timeline({scrollTrigger:{trigger:".index__inner",start:"top top",end:"bottom top",scroller:document.body,scrub:!0}}),t.pause();const r=document.querySelectorAll(".main-background div");t.to(r[0],{opacity:"0",duration:2}),t.to(r[1],{opacity:"1",duration:2},"-=2"),t.to(document.querySelector(".index__about"),{opacity:.2,duration:2})}}let s=0;function d(){s!=window.innerWidth&&(s=window.innerWidth,a())}i(),window.innerWidth,window.removeEventListener("resize",d),a(),window.addEventListener("resize",d),form(void 0,r),setTimeout(()=>{window.scrollTo({left:0,top:0})},50),barba.init({sync:!0,transitions:[{leave:e=>gsap.to(e.current.container,{opacity:0,delay:.2}),enter(e){window.scrollTo({left:0,top:0}),e.next.container.querySelector(".main").hasAttribute("data-light")?document.documentElement.classList.add("light-mode"):document.documentElement.classList.remove("light-mode"),i(),form(void 0,r),window.removeEventListener("resize",d),a(),window.addEventListener("resize",d)}}]})}